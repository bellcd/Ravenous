(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(19)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(7),o=n.n(r),i=(n(14),n(1)),c=n(2),l=n(4),p=n(3),u=n(5),h=(n(15),n(16),n(17),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Business"},a.a.createElement("div",{className:"image-container"},a.a.createElement("a",{href:this.props.business.urlYelp},a.a.createElement("img",{src:this.props.business.imageSrc,alt:""}))),a.a.createElement("h2",null,this.props.business.name),a.a.createElement("div",{className:"Business-information"},a.a.createElement("a",{href:this.props.business.urlGoogleMaps},a.a.createElement("div",{className:"Business-address"},a.a.createElement("p",null,this.props.business.address),a.a.createElement("p",null,this.props.business.city),a.a.createElement("p",null,this.props.business.state," ",this.props.business.zipCode))),a.a.createElement("div",{className:"Business-reviews"},a.a.createElement("h3",null,this.props.business.category),a.a.createElement("h3",{className:"rating"},this.props.business.rating),a.a.createElement("p",null,this.props.business.reviewCount))))}}]),t}(a.a.Component)),d=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"BusinessList"}," ",this.props.businesses.map(function(e){return a.a.createElement(h,{business:e,key:e.id})}))}}]),t}(a.a.Component),g=(n(18),{"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count",Distance:"distance"}),m=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getSortByClass",value:function(e){return this.props.sortBy===e?"active":""}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(g).map(function(t){var n=g[t];return a.a.createElement("li",{className:e.getSortByClass(n),key:n,onClick:e.props.onSortByChange.bind(e,n)},t)})}},{key:"componentDidUpdate",value:function(e,t){""!==this.props.location&&""!==this.props.term&&"[object HTMLLIElement]"===this.props.clickEventTarget.toString()&&(this.props.searchYelp(this.props.term,this.props.location,this.props.sortBy,this.props.radius),this.props.onHandleClearClickEventTarget())}},{key:"render",value:function(){return this.renderSortByOptions()}}]),t}(s.Component),y=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderLocationSuggestions",value:function(){if(this.props.suggestions.length>0)return this.props.suggestions.map(function(e,t){return a.a.createElement("option",{key:e,value:e},e)})}},{key:"render",value:function(){return this.renderLocationSuggestions()}}]),t}(s.Component),f=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){""!==this.props.location&&""!==this.props.term&&"Enter"===this.props.keyPressed?(this.props.searchYelp(this.props.term,this.props.location,this.props.sortBy,this.props.radius),this.props.onHandleClearEnterPress()):"locationInputField"===this.props.clickEventTargetId&&""!==this.props.location&&this.props.suggestions===e.suggestions&&this.props.getLocations(this.props.location)}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{id:"termInputField",onKeyUp:this.props.onTermChange,placeholder:"Food Category or Business Name"}),a.a.createElement("input",{list:"locations",id:"locationInputField",onKeyUp:this.props.onLocationChange,placeholder:"Where?"}),a.a.createElement("datalist",{id:"locations"},a.a.createElement(y,{suggestions:this.props.suggestions})),a.a.createElement("input",{id:"radiusInputField",type:"number",onKeyUp:this.props.onRadiusChange,placeholder:"Radius to Search (miles)",min:"0",max:"31"}))}}]),t}(s.Component),v=function(e){function t(){var e,n;Object(i.a)(this,t);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).handleSearch=function(e){""!==n.props.term&&""!==n.props.location&&n.props.searchYelp(n.props.term,n.props.location,n.props.sortBy,n.props.radius),e&&e.preventDefault()},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"SearchBar"},a.a.createElement("div",{className:"SearchBar-sort-options"},a.a.createElement("ul",null,a.a.createElement(m,{onSortByChange:this.props.onSortByChange,onSortBy:this.props.onSortBy,term:this.props.term,location:this.props.location,radius:this.props.radius,sortBy:this.props.sortBy,searchYelp:this.props.searchYelp,clickEventTarget:this.props.clickEventTarget,onHandleClearClickEventTarget:this.props.onHandleClearClickEventTarget}))),a.a.createElement("div",{className:"SearchBar-fields"},a.a.createElement(f,{onTermChange:this.props.onTermChange,onLocationChange:this.props.onLocationChange,onRadiusChange:this.props.onRadiusChange,term:this.props.term,location:this.props.location,radius:this.props.radius,sortBy:this.props.sortBy,keyPressed:this.props.keyPressed,searchYelp:this.props.searchYelp,onHandleClearEnterPress:this.props.onHandleClearEnterPress,clickEventTargetId:this.props.clickEventTargetId,getLocations:this.props.getLocations,suggestions:this.props.suggestions})),a.a.createElement("div",{className:"SearchBar-submit"},a.a.createElement("a",{href:"google.com",onClick:this.handleSearch},"Search for Food!")))}}]),t}(a.a.Component),b="WvKO6dMbgBJ-ndYhfhPPUrI7WwNby-8UNMX5eSwJhouJaq5MW3Us-sK02zMuv1biTP1MkZi787wXUe17X8ChJhr3NljlY9NjhGFWlqcBrefGx55883XJxT2pFnNnXHYx",E={search:function(e,t,n,s){return console.log("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(n,"&radius=").concat(s)),fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(n,"&radius=").concat(s),{headers:{Authorization:"Bearer ".concat(b)}}).then(function(e){return e.json()},function(e){console.log("response from fetch(): ",e)}).then(function(e){if(console.log("jsonResponse",e.businesses),e.businesses){console.log(e.businesses);var t=/ /g,n="";return e.businesses.map(function(e){if(""!==e.location.address1&""!==e.location.city&&"string"===typeof e.location.address1&&"string"===typeof e.location.city){var s=e.location.address1.replace(t,"+"),a=e.location.city.replace(t,"+"),r=e.location.state,o=e.location.zip_code;n="".concat("https://www.google.com/maps/place/").concat(s,"+").concat(a,"+").concat(r,"+").concat(o)}else n=e.url;return{id:e.id,imageSrc:e.image_url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:e.categories[0].title,rating:e.rating,reviewCount:e.review_count,urlYelp:e.url,urlGoogleMaps:n}})}},function(e){return console.log(e)})},locations:function(e){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/autocomplete?&text=".concat(e),{headers:{Authorization:"Bearer ".concat(b)}}).then(function(e){return e.json()},function(e){return console.log(e)}).then(function(e){return e.terms.map(function(e,t){return e.text})},function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleClearEnterPress=function(){"Enter"===n.state.keyPressed&&n.setState({keyPressed:""})},n.handleClearClickEventTarget=function(){n.setState({clickEventTarget:""})},n.searchYelp=function(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;E.search(e,t,s,a).then(function(e){n.setState({businesses:e})})},n.getLocations=function(e){E.locations(n.state.location).then(function(e){n.setState({suggestions:e})})},n.state={businesses:[],term:"",location:"",radius:0,sortBy:"best_match",clickEventTarget:"",clickEventTargetId:"",keyPressed:"",suggestions:["","",""]},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSortByChange",value:function(e,t){this.setState({sortBy:e,clickEventTarget:t.target})}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value,keyPressed:e.key,clickEventTargetId:e.target.id})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value,keyPressed:e.key,clickEventTargetId:e.target.id})}},{key:"handleRadiusChange",value:function(e){var t=Math.floor(1609.34*e.target.value);t=t>5e4?5e4:t,this.setState({radius:t,keyPressed:e.key,clickEventTargetId:e.target.id})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"ravenous"),a.a.createElement(v,{searchYelp:this.searchYelp,onSortByChange:function(t,n){return e.handleSortByChange(t,n)},onTermChange:function(t){return e.handleTermChange(t)},onLocationChange:function(t){return e.handleLocationChange(t)},onRadiusChange:function(t){return e.handleRadiusChange(t)},term:this.state.term,location:this.state.location,sortBy:this.state.sortBy,radius:this.state.radius,clickEventTarget:this.state.clickEventTarget,keyPressed:this.state.keyPressed,onHandleClearClickEventTarget:this.handleClearClickEventTarget,onHandleClearEnterPress:this.handleClearEnterPress,clickEventTargetId:this.state.clickEventTargetId,getLocations:this.getLocations,suggestions:this.state.suggestions}),a.a.createElement(d,{businesses:this.state.businesses}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[8,1,2]]]);
//# sourceMappingURL=main.315a6251.chunk.js.map